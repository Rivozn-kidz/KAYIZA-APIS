<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive API endpoints documentation with real-time testing capabilities">
    <meta name="theme-color" content="#0F172A">
    <meta name="robots" content="index, follow">
    <meta name="keywords" content="API endpoints, RESTful API category, developer documentation, API testing tools">
    <meta property="og:title" content="API Category Documentation">
    <meta property="og:description" content="Explore and test API endpoints in real-time with our interactive documentation">
    <meta property="og:type" content="website">
    <title>KAYIZA API Category | Developer Portal</title>
    <link rel="icon" href="https://img.icons8.com/color/96/api-settings.png" type="image/png">
    <link rel="canonical" href="">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'mono': ['Ubuntu Mono', 'monospace'],
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    },
                    colors: {
                        'primary': '#0F172A',
                        'secondary': '#1E293B',
                        'accent': '#3B82F6'
                    }
                }
            }
        }
    </script>
    <style>
        @media (max-width: 767px) {
            ::-webkit-scrollbar {
                display: none !important;
            }
        }
        
        /* Loader styles */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0F172A;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease-out;
        }
        #loader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        /* From Uiverse.io by kennyotsu */
        .card {
            /* color used to softly clip top and bottom of the .words container */
            --bg-color: #0F172A;
            background-color: var(--bg-color);
            padding: 1rem 2rem;
            border-radius: 1.25rem;
            border: 1px solid #1E293B;
        }
        .loader {
            color: #94a3b8;
            font-family: "Inter", sans-serif;
            font-weight: 500;
            font-size: 25px;
            -webkit-box-sizing: content-box;
            box-sizing: content-box;
            height: 40px;
            padding: 10px 10px;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            border-radius: 8px;
        }

        .words {
            overflow: hidden;
            position: relative;
        }
        .words::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(
                var(--bg-color) 10%,
                transparent 30%,
                transparent 70%,
                var(--bg-color) 90%
            );
            z-index: 20;
        }

        .word {
            display: block;
            height: 100%;
            padding-left: 6px;
            color: #3B82F6;
            animation: spin_4991 4s infinite;
        }

        @keyframes spin_4991 {
            10% {
                -webkit-transform: translateY(-102%);
                transform: translateY(-102%);
            }

            25% {
                -webkit-transform: translateY(-100%);
                transform: translateY(-100%);
            }

            35% {
                -webkit-transform: translateY(-202%);
                transform: translateY(-202%);
            }

            50% {
                -webkit-transform: translateY(-200%);
                transform: translateY(-200%);
            }

            60% {
                -webkit-transform: translateY(-302%);
                transform: translateY(-302%);
            }

            75% {
                -webkit-transform: translateY(-300%);
                transform: translateY(-300%);
            }

            85% {
                -webkit-transform: translateY(-402%);
                transform: translateY(-402%);
            }

            100% {
                -webkit-transform: translateY(-400%);
                transform: translateY(-400%);
            }
        }

        .slide-down {
            animation: slideDown 0.15s ease-out;
        }
        .slide-up {
            animation: slideUp 0.15s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideUp {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
        }
        .truncate {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        .transition-all {
            transition: all 0.3s ease;
        }
        .tab-indicator {
            position: absolute;
            bottom: 0;
            height: 2px;
            background-color: #3B82F6;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .custom-dropdown button svg {
            transition: transform 0.2s ease;
        }
        .custom-dropdown button.open svg {
            transform: rotate(180deg);
        }
        .notification-item {
            transition: opacity 0.3s ease;
        }
        .notification-item.read {
            opacity: 0.6;
        }
        
        /* Removed grid lines (body::before) */
        
        .bg-gradient-accent {
            background: linear-gradient(to right, #3B82F6, #2563EB);
        }
        .hover\:shadow-accent:hover {
            box-shadow: 0 4px 20px rgba(59,130,246,0.4);
        }
        .text-light {
            color: #CBD5E1;
        }
        main {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        main.loaded {
            opacity: 1;
            transform: translateY(0);
        }
        pre code.hljs {
            background: transparent !important;
            padding: 0 !important;
        }
        
        /* Custom color classes for 60-30-10 ratio */
        .bg-primary-60 {
            background-color: #0F172A;
        }
        .bg-secondary-30 {
            background-color: #1E293B;
        }
        .bg-accent-10 {
            background-color: #3B82F6;
        }
        .text-primary {
            color: #0F172A;
        }
        .text-secondary {
            color: #1E293B;
        }
        .text-accent {
            color: #3B82F6;
        }
        .border-secondary {
            border-color: #1E293B;
        }
        .border-accent {
            border-color: #3B82F6;
        }
        
        /* Social icon animations */
        .social-icon {
            transition: all 0.3s ease;
        }
        .social-icon:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }
    </style>
</head>
<body class="bg-primary-60 text-light antialiased font-sans min-h-screen flex flex-col">
    <!-- Loader -->
    <div id="loader">
        <!-- From Uiverse.io by kennyotsu -->
        <div class="card">
            <div class="loader">
                <p>loading</p>
                <div class="words">
                    <span class="word">endpoints</span>
                    <span class="word">requests</span>
                    <span class="word">responses</span>
                    <span class="word">testing</span>
                    <span class="word">endpoints</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Sidebar -->
    <div id="sidebar" class="fixed left-0 top-0 h-full w-64 bg-primary-60 z-[60] transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out overflow-y-auto shadow-2xl border-r border-secondary">
        <div class="py-4 px-4 flex justify-between items-center border-b border-secondary">
            <h3 class="text-lg font-semibold text-white">KAYIZA API Categories</h3>
            <button onclick="closeSidebar()" class="text-gray-400 hover:text-white lg:hidden" aria-label="Close Sidebar">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <div id="sidebarContent" class="pt-4 px-4 space-y-3"></div>
    </div>
    
    <!-- Overlay -->
    <div id="overlay" class="fixed inset-0 bg-black/50 hidden lg:hidden z-[50]" onclick="closeSidebar()"></div>
    
    <!-- Notification Panel -->
    <div id="notificationPanel" class="hidden fixed top-12 right-0 bg-primary-60 border border-secondary p-4 z-[60] shadow-2xl rounded-xl w-80 max-h-96 overflow-y-auto transition-all">
        <div class="flex justify-between items-center mb-4">
            <h4 class="text-base font-semibold text-white">Notifications</h4>
            <button id="clearNotifications" class="text-accent text-sm font-medium hover:text-blue-400 transition-colors">Mark all as read</button>
        </div>
        <div id="notifContent" class="space-y-4"></div>
    </div>
    
    <header class="sticky top-0 z-50 bg-primary-60 border-b border-secondary py-4 shadow-lg">
        <div class="max-w-2xl mx-auto lg:ml-[calc(50%-16rem)] lg:max-w-3xl lg:mr-auto flex items-center px-4 lg:px-0 relative">
            <button onclick="toggleSidebar()" class="pl-2 transition-all hover:scale-110 lg:hidden" aria-label="Open Sidebar">
                <i class="fas fa-bars text-white text-xl"></i>
            </button>
            <h1 class="text-lg font-bold text-white absolute left-1/2 -translate-x-1/2 lg:relative lg:left-auto lg:translate-x-0 lg:ml-4">Kayiza Dash</h1>
            <div class="flex-grow"></div>
            <button onclick="toggleNotifications()" class="relative transition-all hover:scale-110 pr-2" aria-label="Notifications">
                <i class="fas fa-bell text-white text-xl"></i>
                <span id="notifBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1 hidden"></span>
            </button>
        </div>
    </header>
    
    <main class="max-w-2xl mx-auto lg:ml-[calc(50%-16rem)] lg:max-w-3xl lg:mr-auto px-6 py-8 lg:px-8">
        <div class="text-left mb-8">
            <h2 id="headerTitle" class="text-3xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-accent inline-flex items-center">
                <span class="material-icons align-middle mr-3">arrow_outward</span>
            </h2>
        </div>
        
        <div class="flex items-center justify-between mb-4">
            <div class="flex-1 relative">
                <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
                    <span class="material-icons text-gray-500 text-lg">search</span>
                </div>
                <input
                    type="text"
                    id="searchInput"
                    placeholder="Search endpoints..."
                    class="w-full pl-12 pr-4 py-4 text-sm border border-secondary bg-primary-60 text-white placeholder-gray-500 focus:outline-none focus:border-accent rounded-lg shadow-sm transition-all focus:shadow-accent"
                    aria-label="Search Endpoints"
                >
            </div>
        </div>
        
        <div id="content" class="space-y-6">
            <div id="noResults" class="text-center py-16" style="display: none;">
                <div class="max-w-md mx-auto">
                    <h3 class="text-xs text-gray-500 mb-2">No result found.</h3>
                </div>
            </div>
            <div id="apiList" class="space-y-6"></div>
        </div>
    </main>
    
   <!-- Footer -->
    <footer class="bg-secondary-30 border-t border-secondary py-8">
        <div class="max-w-2xl lg:max-w-3xl mx-auto px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <h3 class="text-xl font-bold text-white mb-3">KAYIZA API DOCUMENTATION</h3>
                    <p class="text-light text-sm">Empowering developers with powerful APIs</p>
                </div>
                
                <div class="flex flex-col items-center md:items-end">
                    <div class="flex space-x-4 mb-4">
                        <a href="https://github.com/Ridz-coder01" target="_blank" class="social-icon w-10 h-10 bg-primary-60 border border-secondary rounded-full flex items-center justify-center hover:border-accent hover:bg-accent-10">
                            <i class="fab fa-github text-light text-lg"></i>
                        </a>
                        <a href="https://twitter.com/Ridz-coder01" target="_blank" class="social-icon w-10 h-10 bg-primary-60 border border-secondary rounded-full flex items-center justify-center hover:border-accent hover:bg-accent-10">
                            <i class="fab fa-twitter text-light text-lg"></i>
                        </a>
                        <a href="https://t.me/Ridzcoder" target="_blank" class="social-icon w-10 h-10 bg-primary-60 border border-secondary rounded-full flex items-center justify-center hover:border-accent hover:bg-accent-10">
                            <i class="fab fa-telegram text-light text-lg"></i>
                        </a>
                        <a href="https://instagram.com/Ridz-coder01" target="_blank" class="social-icon w-10 h-10 bg-primary-60 border border-secondary rounded-full flex items-center justify-center hover:border-accent hover:bg-accent-10">
                            <i class="fab fa-instagram text-light text-lg"></i>
                        </a>
                        <a href="https://youtube.com/@ridz-coder" target="_blank" class="social-icon w-10 h-10 bg-primary-60 border border-secondary rounded-full flex items-center justify-center hover:border-accent hover:bg-accent-10">
                            <i class="fab fa-youtube text-light text-lg"></i>
                        </a>
                    </div>
              
            </div>
            
            <div class="mt-8 pt-6 border-t border-secondary text-center">
                <p class="text-sm text-light">
                    &copy; 2024 - 2026 Airbyte Synergetic Labs. All rights reserved.
                    <span class="block md:inline mt-2 md:mt-0">
                        Built with <i class="fas fa-heart text-red-500 mx-1"></i> for developers worldwide
                    </span>
                </p>
            </div>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const sidebarContent = document.getElementById('sidebarContent');
        const notificationPanel = document.getElementById('notificationPanel');
        const notifContent = document.getElementById('notifContent');
        const clearNotificationsBtn = document.getElementById('clearNotifications');
        const notifBadge = document.getElementById('notifBadge');
        let notifs = [];
        let readIds = JSON.parse(localStorage.getItem('readNotifications') || '[]');
        
        function relativeTime(timestamp) {
            const now = Date.now();
            const diff = now - timestamp;
            if (diff < 60000) return 'Just Now';
            if (diff < 3600000) return Math.floor(diff / 60000) + 'm ago';
            if (diff < 86400000) return Math.floor(diff / 3600000) + 'h ago';
            if (diff < 604800000) return Math.floor(diff / 86400000) + 'd ago';
            return new Date(timestamp).toLocaleDateString();
        }
        
        function toggleSidebar() {
            if (window.matchMedia('(min-width: 1024px)').matches) return;
            if (sidebar.classList.contains('-translate-x-full')) {
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            } else {
                closeSidebar();
            }
        }
        
        function closeSidebar() {
            sidebar.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
            document.body.style.overflow = '';
        }
        
        function toggleNotifications() {
            if (notificationPanel.classList.contains('hidden')) {
                notificationPanel.classList.remove('hidden');
            } else {
                notificationPanel.classList.add('hidden');
            }
        }
        
        function markAsRead(id) {
            if (!readIds.includes(id)) {
                readIds.push(id);
                localStorage.setItem('readNotifications', JSON.stringify(readIds));
                updateNotifPanel();
            }
        }
        
        function updateNotifPanel() {
            const unread = notifs.filter(n => !readIds.includes(n.id));
            let notifHtml = '';
            if (unread.length > 0) {
                notifHtml = unread.map(n => `
                    <div onclick="markAsRead(${n.id})" class="notification-item py-3 cursor-pointer border-b border-secondary last:border-0">
                        <h5 class="text-sm font-semibold text-white mb-1">${n.title}</h5>
                        <p class="text-xs text-light mb-1">${n.message}</p>
                        <span class="text-xs text-gray-500">${relativeTime(n.createdAt)}</span>
                    </div>
                `).join('');
                notifBadge.textContent = unread.length;
                notifBadge.classList.remove('hidden');
            } else {
                notifHtml = '<p class="text-xs text-gray-400 text-center py-4">No notifications yet.</p>';
                notifBadge.classList.add('hidden');
            }
            notifContent.innerHTML = notifHtml;
        }
        
        document.addEventListener('click', (event) => {
            if (!event.target.closest('header') && !event.target.closest('#sidebar') && !event.target.closest('#notificationPanel')) {
                closeSidebar();
                notificationPanel.classList.add('hidden');
            }
            const dropdowns = document.querySelectorAll('.custom-dropdown');
            dropdowns.forEach(dropdown => {
                if (!dropdown.contains(event.target)) {
                    const options = dropdown.querySelector('.dropdown-options');
                    if (options && !options.classList.contains('hidden')) {
                        options.classList.add('slide-up');
                        setTimeout(() => {
                            options.classList.add('hidden');
                            options.classList.remove('slide-up', 'slide-down');
                        }, 150);
                    }
                }
            });
        });
        
        clearNotificationsBtn.addEventListener('click', () => {
            const newIds = notifs.map(n => n.id).filter(id => !readIds.includes(id));
            if (newIds.length > 0) {
                readIds = [...readIds, ...newIds];
                localStorage.setItem('readNotifications', JSON.stringify(readIds));
                updateNotifPanel();
            }
        });
        
        let searchInput, noResults, apiList;
        
        function toggleEndpoint(endpointIndex) {
            const content = document.getElementById(`endpoint-${endpointIndex}`);
            const icon = document.getElementById(`endpoint-icon-${endpointIndex}`);
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                content.classList.add('slide-down');
                icon.style.transform = 'rotate(180deg)';
                setTimeout(() => initializeIndicator(endpointIndex), 50);
            } else {
                content.classList.add('slide-up');
                icon.style.transform = 'rotate(0deg)';
                setTimeout(() => {
                    content.classList.add('hidden');
                    content.classList.remove('slide-up', 'slide-down');
                }, 150);
            }
        }
        
        function initializeIndicator(endpointIndex) {
            const getTab = document.getElementById(`tab-get-${endpointIndex}`);
            if (getTab) {
                const indicator = document.getElementById(`tab-indicator-${endpointIndex}`);
                indicator.style.left = getTab.offsetLeft + 'px';
                indicator.style.width = getTab.offsetWidth + 'px';
            }
        }
        
        // Return the currently active method name (GET, POST, etc.) for an endpoint
        function getActiveMethod(endpointIndex) {
            const possible = ['get','post','put','delete','head','patch'];
            for (const m of possible) {
                const tab = document.getElementById(`tab-${m}-${endpointIndex}`);
                if (tab && tab.classList.contains('text-white')) {
                    return m.toUpperCase();
                }
            }
            // fallback to first available tab
            const firstTab = document.querySelector(`#tab-get-${endpointIndex}`) || document.querySelector(`#tab-post-${endpointIndex}`);
            return firstTab ? (firstTab.textContent || 'GET').trim().toUpperCase() : 'GET';
        }
        
        function toggleDropdown(dropdownId) {
            document.querySelectorAll('.custom-dropdown').forEach(dd => {
                if (dd.id !== dropdownId) {
                    const opt = dd.querySelector('.dropdown-options');
                    if (opt && !opt.classList.contains('hidden')) {
                        opt.classList.add('slide-up');
                        setTimeout(() => {
                            opt.classList.add('hidden');
                            opt.classList.remove('slide-up', 'slide-down');
                        }, 150);
                        const btn = dd.querySelector('button');
                        if (btn) btn.classList.remove('open');
                    }
                }
            });
            const button = document.getElementById(`button-${dropdownId}`);
            const options = document.getElementById(`options-${dropdownId}`);
            const willOpen = options.classList.contains('hidden');
            if (willOpen) {
                options.classList.remove('hidden');
                options.classList.add('slide-down');
            } else {
                options.classList.add('slide-up');
                setTimeout(() => {
                    options.classList.add('hidden');
                    options.classList.remove('slide-up', 'slide-down');
                }, 150);
            }
            if (willOpen) {
                button.classList.add('open');
            } else {
                button.classList.remove('open');
            }
        }
        
        function selectOption(dropdownId, value, label) {
            const hiddenInput = document.querySelector(`#${dropdownId} input[type="hidden"]`);
            if (hiddenInput) hiddenInput.value = value;
            const selectedSpan = document.getElementById(`selected-${dropdownId}`);
            if (selectedSpan) selectedSpan.textContent = label;
            toggleDropdown(dropdownId);
        }
        
        function generateExampleCurl(endpointIndex, method) {
            const form = document.getElementById(`form-${endpointIndex}`);
            const onsubmit = form.getAttribute('onsubmit');
            const pathMatch = onsubmit.match(/, '([^']+)', '[^']+'\)$/);
            const path = pathMatch ? pathMatch[1] : '';
            let fullUrl = window.location.origin + path;
            let curl = `curl -X ${method} "${fullUrl}"`;
            const currentDivClass = `.method-${method.toLowerCase()}-${endpointIndex}`;
            const currentDiv = form.querySelector(currentDivClass);
            if (!currentDiv) return;
            const inputs = currentDiv.querySelectorAll('input[type="text"], input[type="hidden"]');
            let routeValues = {};
            let otherParams = {};
            inputs.forEach(input => {
                const ex = input.value || input.placeholder || '';
                if (input.name.startsWith('route_')) {
                    const pn = input.name.replace('route_', '');
                    routeValues[pn] = ex;
                } else {
                    otherParams[input.name] = ex;
                }
            });
            for (const [pn, val] of Object.entries(routeValues)) {
                fullUrl = fullUrl.replace(`:${pn}`, encodeURIComponent(val));
            }
            curl = `curl -X ${method} "${fullUrl}"`;
            if (method === 'GET' || method === 'HEAD') {
                const qp = new URLSearchParams(otherParams);
                if (qp.toString()) {
                    fullUrl += '?' + qp.toString();
                    curl = `curl -X ${method} "${fullUrl}"`;
                }
            } else {
                let jsonBody = otherParams;
                const textarea = currentDiv.querySelector('textarea[name="body"]');
                if (textarea) {
                    try {
                        jsonBody = JSON.parse(textarea.value);
                    } catch (e) {
                        jsonBody = {};
                    }
                }
                if (Object.keys(jsonBody).length > 0) {
                    curl = `curl -X ${method} "${fullUrl}" \\\n -H "Content-Type: application/json" \\\n -d '${JSON.stringify(jsonBody, null, 2)}'`;
                }
            }
            const curlContent = document.getElementById(`curl-content-${endpointIndex}`);
            if (!curlContent) return;
            curlContent.classList.remove('hljs');
            // set text then explicitly run highlight.js for bash
            curlContent.textContent = curl;
            try {
                const result = hljs.highlight(curl, { language: 'bash' });
                curlContent.innerHTML = result.value;
                curlContent.classList.add('hljs');
            } catch (e) {
                // fallback
                hljs.highlightElement(curlContent);
            }
        }
        
        function switchMethod(endpointIndex, method) {
            const possible = ['get','post','put','delete','head','patch'];
            const tabs = possible.filter(m => document.getElementById(`tab-${m.toLowerCase()}-${endpointIndex}`)).map(m => m.toUpperCase());
            tabs.forEach(m => {
                const tab = document.getElementById(`tab-${m.toLowerCase()}-${endpointIndex}`);
                if (tab) {
                    if (m === method) {
                        tab.classList.add('text-white');
                        tab.classList.remove('text-gray-500');
                        const indicator = document.getElementById(`tab-indicator-${endpointIndex}`);
                        if (indicator) {
                            indicator.style.left = tab.offsetLeft + 'px';
                            indicator.style.width = tab.offsetWidth + 'px';
                        }
                    } else {
                        tab.classList.remove('text-white');
                        tab.classList.add('text-gray-500');
                    }
                }
            });
            possible.forEach(pm => {
                const contents = document.querySelectorAll(`.method-${pm}-${endpointIndex}`);
                contents.forEach(el => {
                    el.style.display = pm.toUpperCase() === method ? 'block' : 'none';
                    el.querySelectorAll('input, textarea, select').forEach(inp => inp.disabled = pm.toUpperCase() !== method);
                });
            });
            const form = document.getElementById(`form-${endpointIndex}`);
            let onsubmit = form.getAttribute('onsubmit');
            onsubmit = onsubmit.replace(/executeRequest\(event, \d+, '[A-Z]+'/, `executeRequest(event, ${endpointIndex}, '${method}'`);
            form.setAttribute('onsubmit', onsubmit);
            generateExampleCurl(endpointIndex, method);
            const curlEl = document.getElementById(`curl-content-${endpointIndex}`);
            if (curlEl) {
                curlEl.classList.remove('hljs');
                // try to explicitly highlight current text with bash grammar
                try {
                    const currentText = curlEl.textContent || curlEl.innerText || '';
                    const result = hljs.highlight(currentText, { language: 'bash' });
                    curlEl.innerHTML = result.value;
                    curlEl.classList.add('hljs');
                } catch (e) {
                    hljs.highlightElement(curlEl);
                }
            }
        }
        
        function clearResponse(endpointIndex) {
            const responseElement = document.getElementById(`response-${endpointIndex}`);
            const responseContent = document.getElementById(`response-content-${endpointIndex}`);
            const clearButton = document.getElementById(`clear-${endpointIndex}`);
            responseElement.classList.add('slide-up');
            setTimeout(() => {
                responseElement.classList.add('hidden');
                responseElement.classList.remove('slide-up', 'slide-down');
                responseContent.innerHTML = '';
                clearButton.classList.add('hidden');
            }, 150);
        }
        
        function fallbackCopy(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                const successful = document.execCommand('copy');
                console.log('Fallback: Copying text command was ' + (successful ? 'successful' : 'unsuccessful'));
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
            }
            document.body.removeChild(textArea);
        }
        
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            let text = '';
            if (elementId.startsWith('response-content-')) {
                // Copy all text including METHOD, URL, STATUS headers
                text = element.textContent || element.innerText;
            } else if (elementId.startsWith('curl-content-')) {
                text = element.textContent.replace(/\s*\\\n\s*/g, ' \\\n ').trim();
            }
            
            if (!navigator.clipboard) {
                fallbackCopy(text);
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                console.log('Copied to clipboard');
                // Show feedback
                const copyButton = event.target.closest('button');
                const originalHTML = copyButton.innerHTML;
                copyButton.innerHTML = '<span class="material-icons text-sm">check</span>';
                setTimeout(() => {
                    copyButton.innerHTML = originalHTML;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                fallbackCopy(text);
            });
        }
        
        async function executeRequest(event, endpointIndex, method, path, contentType) {
            event.preventDefault();
            const form = event.target;
            const responseElement = document.getElementById(`response-${endpointIndex}`);
            const responseContent = document.getElementById(`response-content-${endpointIndex}`);
            const clearButton = document.getElementById(`clear-${endpointIndex}`);
            const copyResponseButton = document.getElementById(`copy-response-${endpointIndex}`);
            let fullUrl = window.location.origin + path;
            const formData = new FormData(form);
            const curlElement = document.getElementById(`curl-${endpointIndex}`);
            let curlCommand = `curl -X ${method} "${fullUrl}"`;
            for (let [key, value] of formData.entries()) {
                if (key.startsWith('route_') && value) {
                    const paramName = key.replace('route_', '');
                    const placeholder = ':' + paramName;
                    fullUrl = fullUrl.replace(placeholder, encodeURIComponent(value));
                    path = path.replace(placeholder, encodeURIComponent(value));
                }
            }
            try {
                let axiosConfig = {
                    method: method,
                    url: fullUrl,
                    headers: {}
                };
                if (method === 'GET' || method === 'HEAD') {
                    const params = {};
                    for (let [key, value] of formData.entries()) {
                        if (value && key !== 'body' && !key.startsWith('route_')) {
                            params[key] = value;
                        }
                    }
                    if (Object.keys(params).length > 0) {
                        axiosConfig.params = params;
                        const urlParams = new URLSearchParams(params);
                        path += '?' + urlParams.toString();
                        fullUrl += '?' + urlParams.toString();
                        curlCommand = `curl -X ${method} "${fullUrl}"`;
                    }
                } else {
                    if (contentType === 'multipart/form-data') {
                        const newFormData = new FormData();
                        let formFields = [];
                        for (let [key, value] of formData.entries()) {
                            if (!key.startsWith('route_') && value) {
                                newFormData.append(key, value);
                                if (value instanceof File) {
                                    formFields.push(`-F "${key}=@${value.name}"`);
                                } else {
                                    formFields.push(`-F "${key}=${value}"`);
                                }
                            }
                        }
                        if (formFields.length > 0) {
                            axiosConfig.data = newFormData;
                            axiosConfig.headers['Content-Type'] = 'multipart/form-data';
                            curlCommand += ` \\\n ${formFields.join(' \\\n ')}`;
                        }
                    } else if (contentType === 'application/json') {
                        const bodyTextarea = form.querySelector('textarea[name="body"]');
                        if (bodyTextarea && bodyTextarea.value.trim()) {
                            try {
                                const jsonBody = JSON.parse(bodyTextarea.value);
                                axiosConfig.headers['Content-Type'] = 'application/json';
                                axiosConfig.data = jsonBody;
                                curlCommand += ` \\\n -H "Content-Type: application/json" \\\n -d '${JSON.stringify(jsonBody, null, 2)}'`;
                            } catch (e) {
                                throw new Error('Invalid JSON in request body');
                            }
                        } else {
                            const jsonBody = {};
                            for (let [key, value] of formData.entries()) {
                                if (key !== 'body' && !key.startsWith('route_') && value) {
                                    jsonBody[key] = value;
                                }
                            }
                            if (Object.keys(jsonBody).length > 0) {
                                axiosConfig.headers['Content-Type'] = 'application/json';
                                axiosConfig.data = jsonBody;
                                curlCommand += ` \\\n -H "Content-Type: application/json" \\\n -d '${JSON.stringify(jsonBody, null, 2)}'`;
                            }
                        }
                    } else {
                        const jsonBody = {};
                        for (let [key, value] of formData.entries()) {
                            if (key !== 'body' && !key.startsWith('route_') && value) {
                                jsonBody[key] = value;
                            }
                        }
                        if (Object.keys(jsonBody).length > 0) {
                            axiosConfig.headers['Content-Type'] = 'application/json';
                            axiosConfig.data = jsonBody;
                            curlCommand += ` \\\n -H "Content-Type: application/json" \\\n -d '${JSON.stringify(jsonBody, null, 2)}'`;
                        }
                    }
                }
                const curlContent = document.getElementById(`curl-content-${endpointIndex}`);
                if (curlContent) {
                    curlContent.classList.remove('hljs');
                    curlContent.textContent = curlCommand;
                    try {
                        const result = hljs.highlight(curlCommand, { language: 'bash' });
                        curlContent.innerHTML = result.value;
                        curlContent.classList.add('hljs');
                    } catch (e) {
                        hljs.highlightElement(curlContent);
                    }
                }
                curlElement.classList.remove('hidden');
                curlElement.classList.add('slide-down');
                responseContent.innerHTML = '<span class="text-white">Loading...</span>';
                responseElement.classList.remove('hidden');
                responseElement.classList.add('slide-down');
                const response = await axios(axiosConfig);
                const responseContentType = response.headers['content-type'] || '';
                let contentHtml = '';
                let lang = 'plaintext';
                
                // Create headers HTML for METHOD, URL, STATUS
                const headersHtml = `
                    <div class="text-gray-400 text-xs mb-3">
                        <pre class="text-gray-400">METHOD: ${method}</pre>
                        <pre class="text-gray-400">URL: ${fullUrl}</pre>
                        <pre class="text-gray-400">STATUS: ${response.status} ${response.statusText}</pre>
                    </div>
                `;
                
                if (responseContentType.includes('application/json')) {
                    lang = 'json';
                    const jsonString = JSON.stringify(response.data, null, 2);
                    const escapedJsonString = jsonString
                        .replace(/&/g, '&amp;')
                        .replace(/</g, '&lt;')
                        .replace(/>/g, '&gt;')
                        .replace(/"/g, '&quot;')
                        .replace(/'/g, '&#39;');
                    contentHtml = `${headersHtml}<pre class="text-white text-xs m-0 whitespace-pre-wrap"><code class="language-${lang}">${escapedJsonString}</code></pre>`;
                    copyResponseButton.classList.remove('hidden');
                    copyResponseButton.onclick = () => copyToClipboard(`response-content-${endpointIndex}`);
                    copyResponseButton.innerHTML = '<span class="material-icons text-sm">content_copy</span>';
                } else if (responseContentType.includes('text/')) {
                    const escapedText = response.data
                        .replace(/&/g, '&amp;')
                        .replace(/</g, '&lt;')
                        .replace(/>/g, '&gt;')
                        .replace(/"/g, '&quot;')
                        .replace(/'/g, '&#39;');
                    contentHtml = `${headersHtml}<pre class="text-white text-xs m-0 whitespace-pre-wrap"><code class="language-${lang}">${escapedText}</code></pre>`;
                    copyResponseButton.classList.remove('hidden');
                    copyResponseButton.onclick = () => copyToClipboard(`response-content-${endpointIndex}`);
                    copyResponseButton.innerHTML = '<span class="material-icons text-sm">content_copy</span>';
                } else if (responseContentType.includes('image/')) {
                    axiosConfig.responseType = 'blob';
                    const blobResponse = await axios(axiosConfig);
                    const imageUrl = URL.createObjectURL(blobResponse.data);
                    contentHtml = `
                        ${headersHtml}
                        <img src="${imageUrl}" alt="Response Image" class="max-w-full h-auto rounded">
                    `;
                    copyResponseButton.classList.remove('hidden');
                    copyResponseButton.onclick = () => {
                        const a = document.createElement('a');
                        a.href = imageUrl;
                        a.download = 'image';
                        a.click();
                    };
                    copyResponseButton.innerHTML = '<span class="material-icons text-sm">download</span>';
                } else if (responseContentType.includes('audio/')) {
                    axiosConfig.responseType = 'blob';
                    const blobResponse = await axios(axiosConfig);
                    const audioUrl = URL.createObjectURL(blobResponse.data);
                    contentHtml = `
                        ${headersHtml}
                        <div class="text-white mb-3">Audio Player:</div>
                        <audio controls class="w-full mb-3">
                            <source src="${audioUrl}" type="${responseContentType}">
                            Your browser does not support the audio element.
                        </audio>
                    `;
                    copyResponseButton.classList.remove('hidden');
                    copyResponseButton.onclick = () => {
                        const a = document.createElement('a');
                        a.href = audioUrl;
                        a.download = 'audio';
                        a.click();
                    };
                    copyResponseButton.innerHTML = '<span class="material-icons text-sm">download</span>';
                } else if (responseContentType.includes('video/')) {
                    axiosConfig.responseType = 'blob';
                    const blobResponse = await axios(axiosConfig);
                    const videoUrl = URL.createObjectURL(blobResponse.data);
                    contentHtml = `
                        ${headersHtml}
                        <div class="text-white mb-3">Video Player:</div>
                        <video controls class="w-full max-h-64 mb-3 rounded">
                            <source src="${videoUrl}" type="${responseContentType}">
                            Your browser does not support the video element.
                        </video>
                    `;
                    copyResponseButton.classList.remove('hidden');
                    copyResponseButton.onclick = () => {
                        const a = document.createElement('a');
                        a.href = videoUrl;
                        a.download = 'video';
                        a.click();
                    };
                    copyResponseButton.innerHTML = '<span class="material-icons text-sm">download</span>';
                } else if (responseContentType.includes('application/pdf')) {
                    axiosConfig.responseType = 'blob';
                    const blobResponse = await axios(axiosConfig);
                    const pdfUrl = URL.createObjectURL(blobResponse.data);
                    contentHtml = `
                        ${headersHtml}
                        <div class="text-white mb-3">PDF Document:</div>
                        <iframe src="${pdfUrl}" class="w-full h-64 border border-gray-600 mb-3 rounded"></iframe>
                    `;
                    copyResponseButton.classList.remove('hidden');
                    copyResponseButton.onclick = () => {
                        const a = document.createElement('a');
                        a.href = pdfUrl;
                        a.download = 'document.pdf';
                        a.click();
                    };
                    copyResponseButton.innerHTML = '<span class="material-icons text-sm">download</span>';
                } else {
                    const escapedText = response.data
                        .replace(/&/g, '&amp;')
                        .replace(/</g, '&lt;')
                        .replace(/>/g, '&gt;')
                        .replace(/"/g, '&quot;')
                        .replace(/'/g, '&#39;');
                    contentHtml = `${headersHtml}<pre class="text-white text-xs m-0 whitespace-pre-wrap"><code class="language-${lang}">${escapedText}</code></pre>`;
                    copyResponseButton.classList.remove('hidden');
                    copyResponseButton.onclick = () => copyToClipboard(`response-content-${endpointIndex}`);
                    copyResponseButton.innerHTML = '<span class="material-icons text-sm">content_copy</span>';
                }
                responseContent.innerHTML = contentHtml;
                const responseCode = responseContent.querySelector('pre.text-white code');
                if (responseCode) {
                    responseCode.classList.remove('hljs');
                    hljs.highlightElement(responseCode);
                }
            } catch (error) {
                let errorMessage = error.message;
                let statusText = 'Error';
                let statusCode = '';
                
                if (error.response) {
                    statusCode = error.response.status;
                    statusText = `${error.response.status} ${error.response.statusText}`;
                    if (error.response.data && typeof error.response.data === 'object') {
                        errorMessage = JSON.stringify(error.response.data, null, 2);
                    } else {
                        errorMessage = error.response.data || error.message;
                    }
                } else if (error.request) {
                    errorMessage = 'Network Error: ' + error.message;
                }
                
                const headersHtml = `
                    <div class="text-gray-400 text-xs mb-3">
                        <pre class="text-gray-400">METHOD: ${method}</pre>
                        <pre class="text-gray-400">URL: ${fullUrl}</pre>
                        <pre class="text-gray-400">STATUS: ${statusCode ? statusCode + ' ' + statusText : 'Error'}</pre>
                    </div>
                `;
                
                const escapedError = errorMessage
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#39;');
                responseContent.innerHTML = `
                    ${headersHtml}
                    <pre class="text-white text-xs m-0 whitespace-pre-wrap"><code class="language-json">${escapedError}</code></pre>
                `;
                const responseCode = responseContent.querySelector('pre.text-white code');
                if (responseCode) {
                    responseCode.classList.remove('hljs');
                    hljs.highlightElement(responseCode);
                }
                responseElement.classList.remove('hidden');
                responseElement.classList.add('slide-down');
                copyResponseButton.classList.remove('hidden');
                copyResponseButton.onclick = () => copyToClipboard(`response-content-${endpointIndex}`);
                copyResponseButton.innerHTML = '<span class="material-icons text-sm">content_copy</span>';
            } finally {
                clearButton.classList.remove('hidden');
            }
        }
        
        function applyFilters() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            const apiItems = document.querySelectorAll('.api-item');
            let visibleCount = 0;
            apiItems.forEach(item => {
                const path = item.getAttribute('data-path').toLowerCase();
                const alias = item.getAttribute('data-alias').toLowerCase();
                const searchMatch = path.includes(searchTerm) || alias.includes(searchTerm);
                if (searchMatch) {
                    item.style.display = 'block';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });
            if (visibleCount === 0 && apiItems.length > 0) {
                noResults.style.display = 'block';
                apiList.style.display = 'none';
            } else {
                noResults.style.display = 'none';
                apiList.style.display = 'block';
            }
        }
        
        async function loadCategory() {
            const loader = document.getElementById('loader');
            const main = document.querySelector('main');
            try {
                // Simulate API fetch
                const setRes = await fetch('/set');
                const setData = await setRes.json();
                
                document.querySelector('meta[name="description"]').content = setData.description || 'Interactive API endpoints documentation';
                document.querySelector('meta[property="og:description"]').content = setData.description || 'Interactive API endpoints documentation';
                document.querySelector('link[rel="icon"]').href = setData.icon || 'https://img.icons8.com/color/96/api-settings.png';
                
                if (setData.telegram) document.getElementById('telegramLink').href = setData.telegram;
                if (setData.twitter) document.getElementById('twitterLink').href = setData.twitter;
                if (setData.instagram) document.getElementById('instagramLink').href = setData.instagram;
                if (setData.github) document.getElementById('githubLink').href = setData.github;
                
                document.getElementById('footerCopyright').textContent = `2023 - ${new Date().getFullYear()} ${setData.name || 'API Documentation Hub'}. Airbyte Synergetic Labs All rights reserved.`;
                
                notifs = setData.notification || [];
                updateNotifPanel();
                
                // Simulate endpoints fetch
                const catPath = location.pathname.replace('/category/', '').toLowerCase();
                const res = await fetch('/endpoints');
                const { endpoints } = await res.json();
                const category = endpoints.find(c => c.name.toLowerCase().replace(/\s+/g, '-') === catPath);
                
                if (!category) {
                    document.getElementById('noResults').innerHTML = '<div class="max-w-md mx-auto"><h3 class="text-xs text-gray-500 mb-2">Category not found.</h3></div>';
                    document.getElementById('noResults').style.display = 'block';
                    document.getElementById('apiList').style.display = 'none';
                    return;
                }
                
                const capitalizedName = category.name.charAt(0).toUpperCase() + category.name.slice(1);
                document.title = `${capitalizedName} - ${setData.name || 'API Documentation Hub'}`;
                document.querySelector('meta[property="og:title"]').content = `${capitalizedName} - ${setData.name || 'API Documentation Hub'}`;
                document.querySelector('link[rel="canonical"]').href = window.location.href;
                document.getElementById('headerTitle').innerHTML = `<span class="material-icons align-middle mr-3">arrow_outward</span>${capitalizedName}`;
                
                const apiList = document.getElementById('apiList');
                apiList.innerHTML = '';
                let index = 0;
                
                for (const item of category.items) {
                    const alias = item.name.replace(/-/g, ' ').split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
                    const basePath = item.path ? item.path.split('?')[0] : '/api/endpoint';
                    const methods = item.methods || ['GET'];
                    const methodStr = methods.join('/');
                    
                    let tabsHtml = '';
                    if (methods.length > 1) {
                        tabsHtml = `<div class="tab-container border-b border-secondary mb-4"><div class="flex relative">`;
                        methods.forEach((m, idx) => {
                            tabsHtml += `
                                <button
                                    type="button"
                                    onclick="switchMethod(${index}, '${m}')"
                                    id="tab-${m.toLowerCase()}-${index}"
                                    class="px-4 py-2 text-xs font-semibold ${idx === 0 ? 'text-white' : 'text-gray-500 hover:text-white'} transition-colors"
                                >
                                    ${m}
                                </button>
                            `;
                        });
                        tabsHtml += `<div class="tab-indicator" id="tab-indicator-${index}"></div></div></div>`;
                    }
                    
                    let formHtml = '';
                    if (item.params && item.params.length) {
                        formHtml = item.params.map((p, pIndex) => {
                            let inputHtml;
                            const paramName = basePath.includes(`:${p.name}`) ? `route_${p.name}` : p.name;
                            
                            if (p.options && Array.isArray(p.options)) {
                                let optionsArr = p.options.map(opt => ({value: opt, label: opt}));
                                let defaultLabel = '-- optional --';
                                if (p.required) {
                                    defaultLabel = optionsArr[0].label;
                                } else {
                                    optionsArr.unshift({value: '', label: defaultLabel});
                                }
                                let selectedValue = p.required
                                    ? (p.example && p.options.includes(p.example) ? p.example : (p.options[0] || ''))
                                    : (p.example && p.options.includes(p.example) ? p.example : '');
                                let selectedLabel = optionsArr.find(opt => opt.value === selectedValue)?.label || defaultLabel;
                                const dropdownId = `dropdown-${index}-${pIndex}`;
                                const optionsHtml = optionsArr.map(opt => `
                                    <button type="button" onclick="selectOption('${dropdownId}', '${opt.value}', '${opt.label}')" class="w-full px-3 py-2 text-sm text-white hover:bg-primary-60 transition-all text-left ${opt.value === '' ? 'text-gray-500' : ''}">
                                        ${opt.label}
                                    </button>
                                `).join('');
                                inputHtml = `
                                    <div class="relative custom-dropdown" id="${dropdownId}">
                                        <input type="hidden" name="${paramName}" value="${selectedValue}">
                                        <button id="button-${dropdownId}" type="button" onclick="toggleDropdown('${dropdownId}')" class="w-full px-3 py-2 border border-secondary bg-primary-60 text-sm text-white rounded-lg transition-all focus:shadow-accent focus:outline-none focus:border-accent flex justify-between items-center">
                                            <span id="selected-${dropdownId}">${selectedLabel}</span>
                                            <svg class="w-3 h-3 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                            </svg>
                                        </button>
                                        <div id="options-${dropdownId}" class="dropdown-options hidden absolute w-full bg-primary-60 border border-secondary rounded-lg mt-1 z-10 max-h-40 overflow-y-auto shadow-lg">
                                            ${optionsHtml}
                                        </div>
                                    </div>
                                `;
                            } else {
                                inputHtml = `<input type="text" name="${paramName}" class="w-full px-3 py-2 border border-secondary bg-primary-60 text-sm focus:outline-none focus:border-accent text-white placeholder:text-gray-500 rounded-lg transition-all focus:shadow-accent" placeholder="${p.example || ''}" ${p.required ? 'required' : ''}>`;
                            }
                            return `
                                <div>
                                    <label class="block text-xs font-medium text-light">
                                        ${p.name} ${p.required ? '<span class="text-red-400">*</span>' : ''}
                                    </label>
                                    <div class="text-xs text-gray-500 mb-1">
                                        ${p.desc || p.description || ''}
                                    </div>
                                    ${inputHtml}
                                </div>
                            `;
                        }).join('');
                    }
                    
                    const bodyExample = item.params ? JSON.stringify(item.params.reduce((acc, p) => { if (!basePath.includes(`:${p.name}`)) acc[p.name] = p.example || ''; return acc; }, {}), null, 2) : '{}';
                    let getStyle = methods.length > 1 ? (methods[0] === 'GET' ? 'display: block;' : 'display: none;') : (methods[0] === 'GET' ? 'display: block;' : 'display: none;');
                    let postStyle = methods.length > 1 ? (methods[0] === 'POST' ? 'display: block;' : 'display: none;') : (methods[0] === 'POST' ? 'display: block;' : 'display: none;');
                    
                    const paramsHtml = (item.params && item.params.length) ? `
                        <h5 class="text-xs font-medium text-white mb-3 flex items-center">
                            <span class="material-icons text-xs mr-1">tune</span>
                            PARAMETERS
                        </h5>
                        <div class="space-y-3">
                            ${formHtml}
                        </div>
                    ` : '';
                    
                    const div = document.createElement('div');
                    div.classList.add('bg-primary-60', 'border', 'border-secondary', 'api-item', 'hover:border-accent', 'rounded-xl', 'overflow-hidden', 'shadow-md', 'transition-all', 'hover:shadow-accent');
                    div.dataset.method = methodStr;
                    div.dataset.path = basePath;
                    div.dataset.alias = alias;
                    div.innerHTML = `
                        <button onclick="toggleEndpoint(${index})" class="w-full text-left">
                            <div class="px-5 py-3.5 flex items-center justify-between gap-3 bg-primary-60">
                                <div class="flex items-center min-w-0 flex-1 gap-3">
                                    <span class="inline-block px-2.5 py-1 text-xs font-semibold text-white flex-shrink-0 rounded bg-gradient-accent transition-all hover:opacity-90">
                                        ${methodStr}
                                    </span>
                                    <span class="font-semibold truncate text-[0.9rem] text-white" title="${alias}">${alias}</span>
                                </div>
                                <div class="flex items-center gap-2 flex-shrink-0">
                                    <span class="material-icons transition-transform duration-200 text-gray-400" id="endpoint-icon-${index}">expand_more</span>
                                </div>
                            </div>
                            <div class="px-5 border-t border-secondary"></div>
                            <div class="px-5 pb-3 bg-primary-60">
                                <span class="text-xs text-gray-500 block pt-2.5 font-mono" title="${basePath}">${basePath}</span>
                            </div>
                        </button>
                        <div id="endpoint-${index}" class="hidden bg-primary-60 px-5 pt-3 pb-8 border-t border-secondary rounded-b-xl">
                            <div>
                                <div class="text-light font-bold text-xs mb-2 flex items-center">
                                    <span class="material-icons text-sm mr-1">info</span>
                                    DESCRIPTION
                                </div>
                                <p class="text-xs text-gray-400 mb-4">${item.desc || item.description || ''}</p>
                            </div>
                            <div>
                                <div class="text-light font-bold text-xs mb-2 flex items-center">
                                    <span class="material-icons text-sm mr-1">play_arrow</span>
                                    TRY IT OUT
                                </div>
                                <div>
                                    <form id="form-${index}" onsubmit="executeRequest(event, ${index}, '${methods[0]}', '${basePath}', 'application/json')">
                                        ${tabsHtml}
                                        <div class="mb-4 method-content method-get-${index}" style="${getStyle}">
                                            ${paramsHtml}
                                        </div>
                                        <div class="mb-4 method-content method-post-${index}" style="${postStyle}">
                                            <div class="bg-primary-60 border border-secondary text-white text-xs rounded-md">
                                                <div class="px-3 py-2 bg-primary-60 border-b border-secondary rounded-t-md">
                                                    <span class="text-xs text-gray-500">Request Body</span>
                                                </div>
                                                <div class="p-4">
                                                    <textarea name="body" rows="8" class="w-full px-3 py-2 border border-secondary bg-primary-60 text-sm focus:outline-none focus:border-accent text-white placeholder:text-gray-500 font-mono rounded-lg transition-all focus:shadow-accent resize-none" placeholder="Enter JSON body here...">${bodyExample}</textarea>
                                                    <div class="text-xs text-gray-500 mt-2">
                                                        Modify the JSON structure above as needed for your request.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex space-x-2 mt-4">
                                            <button type="submit" class="flex-1 bg-gradient-accent hover:opacity-90 font-semibold text-white px-6 py-2 text-xs font-medium transition-colors duration-150 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg">
                                                Execute
                                            </button>
                                            <button type="button" id="clear-${index}" onclick="clearResponse(${index})" class="hidden flex-1 bg-primary-60 border border-secondary hover:border-accent font-semibold text-white px-6 py-2 text-xs font-medium transition-colors duration-150 rounded-lg">
                                                Clear
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div id="response-${index}" class="hidden mt-6">
                                <div class="text-light font-bold text-xs mb-3 flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="material-icons text-sm mr-1">code</span>
                                        RESPONSE
                                    </div>
                                    <button id="copy-response-${index}" onclick="copyToClipboard('response-content-${index}')" class="text-gray-400 hover:text-white flex items-center hidden transition-all">
                                        <span class="material-icons text-sm">content_copy</span>
                                    </button>
                                </div>
                                <div class="bg-primary-60 border border-secondary text-white text-xs rounded-md">
                                    <div class="px-3 py-2 bg-primary-60 border-b border-secondary rounded-t-md">
                                        <span class="text-xs text-gray-500">Output</span>
                                    </div>
                                    <div class="p-4 max-h-80 overflow-auto" id="response-content-${index}"></div>
                                </div>
                            </div>
                            <div id="curl-${index}" class="mt-6">
                                <div class="text-light font-bold text-xs mb-3 flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="material-icons text-sm mr-1">terminal</span>
                                        CURL COMMAND
                                    </div>
                                    <button onclick="copyToClipboard('curl-content-${index}')" class="text-gray-400 hover:text-white flex items-center transition-all">
                                        <span class="material-icons text-sm">content_copy</span>
                                    </button>
                                </div>
                                <div class="bg-primary-60 border border-secondary text-white text-xs rounded-md">
                                    <div class="px-3 py-2 bg-primary-60 border-b border-secondary rounded-t-md">
                                        <span class="text-xs text-gray-500">Shell</span>
                                    </div>
                                    <div class="p-4">
                                        <pre class="text-white text-xs m-0 whitespace-pre-wrap overflow-auto max-h-40"><code class="language-bash" id="curl-content-${index}"></code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    apiList.appendChild(div);
                    
                    // Initialize curl preview and attach live update handlers
                    generateExampleCurl(index, methods[0]);
                    const formEl = document.getElementById(`form-${index}`);
                    const attachUpdate = () => generateExampleCurl(index, getActiveMethod(index));
                    if (formEl) {
                        formEl.querySelectorAll('input, textarea, select').forEach(inp => {
                            inp.addEventListener('input', attachUpdate);
                            inp.addEventListener('change', attachUpdate);
                        });
                    }
                    
                    const curlEl = document.getElementById(`curl-content-${index}`);
                    if (curlEl) {
                        curlEl.classList.remove('hljs');
                        try {
                            const result = hljs.highlight(curlEl.textContent || curlEl.innerText || '', { language: 'bash' });
                            curlEl.innerHTML = result.value;
                            curlEl.classList.add('hljs');
                        } catch (e) {
                            hljs.highlightElement(curlEl);
                        }
                    }
                    index++;
                }
                
                let sidebarHtml = `
                    <a href="/docs" class="flex items-center px-3 py-1 text-white hover:bg-primary-60 rounded-xl transition-all hover:shadow-sm ${location.pathname === '/docs' || location.pathname === '/' ? 'bg-primary-60 border-l-2 border-gray-600 pl-3 font-medium' : ''}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 mr-3 text-accent">
                            <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                        </svg>
                        Dashboard
                    </a>
                    <div class="border-t border-secondary my-3 -mx-4"></div>
                    <p class="text-gray-400 text-sm mb-2 font-medium">Available Categories</p>
                `;
                
                for (const cat of endpoints) {
                    const capitalizedName = cat.name.charAt(0).toUpperCase() + cat.name.slice(1);
                    const slug = cat.name.toLowerCase().replace(/\s+/g, '-');
                    const active = location.pathname.startsWith(`/category/${slug}`);
                    sidebarHtml += `
                        <a href="/category/${slug}" class="flex items-center justify-between px-3 py-1 text-white hover:bg-primary-60 rounded-xl transition-all hover:shadow-sm ${active ? 'bg-primary-60 border-l-2 border-gray-600 pl-3 font-medium' : ''}">
                            <div class="flex items-center">
                                <i class="fas fa-folder mr-3 text-accent"></i>
                                ${capitalizedName} (${cat.items.length})
                            </div>
                            <i class="material-icons text-lg text-gray-400">keyboard_arrow_right</i>
                        </a>
                    `;
                }
                sidebarContent.innerHTML = sidebarHtml;
                
            } catch (error) {
                console.error('Error loading category:', error);
                document.getElementById('noResults').innerHTML = '<div class="max-w-md mx-auto"><h3 class="text-xs text-gray-500 mb-2">Error loading category. Please try again.</h3></div>';
                document.getElementById('noResults').style.display = 'block';
            } finally {
                setTimeout(() => {
                    loader.classList.add('hidden');
                    main.classList.add('loaded');
                }, 1500);
            }
        }
        
        window.addEventListener('load', () => {
            searchInput = document.getElementById('searchInput');
            noResults = document.getElementById('noResults');
            apiList = document.getElementById('apiList');
            searchInput.addEventListener('input', applyFilters);
            loadCategory();
        });
    </script>
</body>
</html>